---
theme:
  name: tokyonight-storm
  override:
    footer:
      style: template
      left: "@orhun.dev"
      right: "Tokyo Rust Meetup"
---

<!-- new_lines: 1 -->

![image:width:50%](assets/rat-dance-2.gif)

<!-- no_footer -->

<!-- end_slide -->

![image:width:35%](assets/rust-tokyo.png)

<!-- alignment: center -->

**Rustã§ãƒã‚±ãƒƒãƒˆã‚µã‚¤ã‚ºã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ« UIã‚’ä½œã‚‹** ğŸ¦€

_Rust Tokyo Meetup ğŸ‡¯ğŸ‡µ_

---

**Orhun ParmaksÄ±z -  ãƒ‘ãƒ«ãƒã‚¯ã‚·ã‚º ã‚ªãƒ«ãƒ•ãƒ³**

`@orhun.dev` | `@ratatui.rs`

<!-- no_footer -->

<!-- end_slide -->

<!-- column_layout: [1, 1] -->

<!-- column: 0 -->

![image:width:80%](assets/rat-cook.png)

<!-- column: 1 -->

<!-- new_lines: 2 -->

# **Orhun ParmaksÄ±z**

ğŸ‡¹ğŸ‡· **ã‚¢ãƒ³ã‚«ãƒ©ã€ãƒˆãƒ«ã‚³**åœ¨ä½ã®ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼

ğŸ¦€ _ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã€Rustã€ãã—ã¦ã‚¿ãƒ¼ãƒŸãƒŠãƒ«!_

ğŸ­ **Ratatui**ã€**Ratzilla**ã€**git-cliff** ãªã©...

ğŸ“¦ **Arch Linux** (btw)

---

`https://github.com/orhun`  
`https://youtube.com/@orhundev`

<!-- end_slide -->

<!-- alignment: center -->

<!-- new_lines: 3 -->

**ãƒã‚ºãƒŸã‚’æƒ³åƒã—ã¦ãã ã•ã„ã€‚**

<!-- pause -->

![](assets/rat-cup.gif)

<!-- pause -->

_ãƒã‚ºãƒŸã¯MP3ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„_

<!-- pause -->

_ãƒã‚ºãƒŸã¯ytmp3downloader.ccã«ç§»å‹•ã™ã‚‹_

<!-- no_footer -->

<!-- end_slide -->

![image:width:100%](assets/yy-info.gif)

<!-- pause -->

<!-- jump_to_middle -->

![](assets/rat-cry.gif)

<!-- alignment: center -->

<!-- no_footer -->

<!-- end_slide -->

<!-- no_footer -->

<!-- alignment: center -->

<!-- new_lines: 3 -->

**ãƒã‚ºãƒŸã‚’æƒ³åƒã—ã¦ãã ã•ã„ï¼ˆã‚‚ã†ä¸€åº¦ï¼‰**

![](assets/rat-cup-2.gif)

<!-- pause -->

_ãƒã‚ºãƒŸã¯cheese.txtã‚’æ¢ã—ã¦ã„ã‚‹_

<!-- pause -->

_ãƒã‚ºãƒŸã¯ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ã‚’ä½¿ã†_

<!-- end_slide -->

<!-- no_footer -->

![image:width:40%](assets/loading-bar.png)

<!-- pause -->

![](assets/loading-bar-1.png)

<!-- pause -->

![](assets/loading-bar-2.png)

<!-- pause -->

<!-- jump_to_middle -->

![](assets/rat-tired.gif)

<!-- end_slide -->

<!-- alignment: center -->

<!-- new_lines: 3 -->

<!-- no_footer -->

**ãƒã‚ºãƒŸã‚’æƒ³åƒã—ã¦ãã ã•ã„ï¼ˆã”ã‚ã‚“ã­ï¼‰**

![](assets/rat-sus.gif)

<!-- pause -->

_ãƒã‚ºãƒŸã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’ç›£è¦–ã—ãŸã„_

<!-- pause -->

_ãƒã‚ºãƒŸã¯GUIãƒ„ãƒ¼ãƒ«ã‚’èµ·å‹•ã™ã‚‹_

<!-- pause -->

<!-- end_slide -->

<!-- no_footer -->

![image:width:60%](assets/clicking.gif)

<!-- end_slide -->

![image:width:40%](assets/rat-boom.gif)

<!-- alignment: center -->

_ãƒã‚ºãƒŸã¯çˆ†ç™ºã—ãŸã€‚_

<!-- no_footer -->

<!-- end_slide -->

# è§£æ±ºç­–ã¯ï¼Ÿ

<!-- pause -->

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã™ã€‚

<!-- pause -->

```bash
$ yt-dlp -f bestaudio --extract-audio --audio-format mp3
```

<!-- pause -->

```bash +exec +acquire_terminal
ig 'fn main' /home/orhun/gh/
```

<!-- pause -->

```sh +exec +acquire_terminal
sudo oryx -i wlp3s0
```

<!-- end_slide -->

![image:width:80%](assets/ratatui-header.png)

<!-- alignment: center -->

**https://ratatui.rs**

<!-- pause -->

---

> Ratatuiã¯ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆTUIï¼‰ã‚’æ–™ç†ã™ã‚‹ãŸã‚ã®Rustãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

- `2023å¹´`ã‹ã‚‰å­˜åœ¨ï¼ˆ`tui-rs`ã‹ã‚‰ã®ãƒ•ã‚©ãƒ¼ã‚¯ï¼‰

- `250äººä»¥ä¸Š`ã®è²¢çŒ®è€…ã€æ•°ç™¾ã®ã‚¢ãƒ—ãƒªã€`800ä¸‡å›ä»¥ä¸Š`ã®ã‚¯ãƒ¬ãƒ¼ãƒˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

- `tokio-console`ã€`yazi`ã€`dioxus-cli`ã€`atuin`ã€`gitui`ç­‰

- `Netflix`ã€`OpenAI`ã€`OVHcloud`ãªã©å¤šãã®ä¼æ¥­ã§ä½¿ç”¨

<!-- end_slide -->

```bash +exec +acquire_terminal
cargo run --manifest-path ratatui/examples/apps/demo2/Cargo.toml
```

<!-- end_slide -->

# atac

<!-- alignment: center -->

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ç”¨ã®Postmanã®ã‚ˆã†ãªAPIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

![image:width:90%](assets/atac.gif)

[](https://github.com/Julien-cpsn/ATAC)

<!-- end_slide -->

# doxx

<!-- alignment: center -->

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§.docxãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¡¨ç¤º

![image:width:90%](assets/doxx.gif)

[](https://github.com/bgreenwell/doxx)

<!-- end_slide -->

# rebels-in-the-sky

<!-- alignment: center -->

éŠ€æ²³ä¸­ã§ãƒã‚¹ã‚±ãƒƒãƒˆãƒœãƒ¼ãƒ«ã‚’ã‚„ã‚‹å®‡å®™æµ·è³Š

[](https://github.com/ricott1/rebels-in-the-sky)

---

<!-- pause -->

```bash +exec +acquire_terminal
rebels-in-the-sky
```

<!-- end_slide -->

# sharad-ratatui

<!-- alignment: center -->

ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®ã‚·ãƒ£ãƒ‰ã‚¦ãƒ©ãƒ³RPG

[](https://github.com/ProHaller/sharad_ratatui)

---

<!-- pause -->

```bash +exec
mpv assets/sharad.mp4 > /dev/null 2>&1
```

<!-- end_slide -->

# grainiac

<!-- alignment: center -->

ã‚°ãƒ©ãƒ‹ãƒ¥ãƒ©ãƒ¼ã‚µãƒ³ãƒ—ãƒ©ãƒ¼ã®TUI

[](https://github.com/christian-grothe/grainiac)

---

<!-- pause -->

```bash +exec
mpv assets/grainiac.mp4 > /dev/null 2>&1
```

<!-- pause -->

```bash +exec
handlr open https://www.youtube.com/watch?v=XzJnMVo1ZkM
```

<!-- end_slide -->

# tachyonfx

<!-- alignment: center -->

TUIã®ã‚¢ãƒ—ãƒªã«ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã®ã‚ˆã†ãªåŠ¹æœã‚’è¿½åŠ 

[](https://github.com/junkdog/tachyonfx)

---

<!-- pause -->

```bash +exec +acquire_terminal
exabind
```

<!-- end_slide -->

<!-- alignment: center -->

<!-- new_lines: 2 -->

![](assets/rat-demand.gif)

<!-- no_footer -->

_è¦‹ã›ã‚ï¼_

<!-- end_slide -->

<!-- column_layout: [1, 1] -->

<!-- column: 0 -->

## ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ

- Block
- BarChart
- Calendar
- Canvas
- Chart
- Gauge
- LineGauge
- List
- Paragraph
- Scrollbar
- Sparkline
- Table
- Tabs
- ...

- `Widget`ãƒˆãƒ¬ã‚¤ãƒˆã‚’å®Ÿè£…ã™ã‚‹ã‚‚ã®

<!-- column: 1 -->

<!-- pause -->

## ä¸»è¦æ¦‚å¿µ

- ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
- ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†

![image:width:60%](assets/ratcopter.gif)

<!-- end_slide -->

### æœ€å°é™ã®ä¾‹

```rust {1-20|5|6|7,16-18|8-11|12-14|1-20} +line_numbers
use ratatui::crossterm::event::{self, Event};
use ratatui::{text::Text, Frame};

fn main() -> std::io::Result<()> {
    let mut terminal = ratatui::init();
    loop {
        terminal.draw(draw)?;
        if matches!(event::read()?, Event::Key(_)) {
            break;
        }
    }
    ratatui::restore();
    Ok(())
}

fn draw(frame: &mut Frame) {
    frame.render_widget("Hello World!", frame.area());
}
```

<!-- end_slide -->

### ã•ã‚‰ã«æœ€å°é™ã®ä¾‹

```rust {1-13|2|3|4-6|8-10|1-13} +line_numbers
fn main() -> std::io::Result<()> {
    ratatui::run(|terminal| {
        loop {
            terminal.draw(|frame|
                frame.render_widget("rat", frame.area())
            )?;

            if crossterm::event::read()?.is_key_press() {
                break Ok(());
            }
        }
    })
}
```

<!-- end_slide -->

### 1. ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

<!-- pause -->

<!-- column_layout: [3, 1] -->

<!-- column: 0 -->

```rust {1-16|1|1,4,9|6,11|1-16} +line_numbers
let mut toggle = false;
loop {
    terminal.draw(|frame: &mut Frame| {
        if toggle {
            frame.render_widget(
                BarChart::default()
                //...
            );
        } else {
            frame.render_widget(
                LineGauge::default()
                //...
            );
        }
    });
}
```

<!-- column: 1 -->

<!-- new_lines: 6 -->

![](assets/rat-dance2.gif)

<!-- end_slide -->

### 2. ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆè¨­è¨ˆï¼‰

<!-- pause -->

<!-- column_layout: [8, 2] -->

<!-- column: 1 -->

<!-- new_lines: 11 -->

![](assets/rat-point.gif)

<!-- column: 0 -->

```rust {1-9|2|3-7|1-9} +line_numbers
let layout = Layout::default()
    .direction(Direction::Horizontal)
    .constraints(&[
        Constraint::Length(10),
        Constraint::Percentage(70),
        Constraint::Min(5),
    ])
    .split(frame.area());
```

<!-- pause -->

```rust +line_numbers
let percent =
  if msg_count > 50 { 80 } else { 50 };

let contraints = &[
  Constraint::Percentage(percent),
  Constraint::Percentage(100 - percent)
];
```

<!-- end_slide -->

#### åˆ¶ç´„

```bash +exec +acquire_terminal
cd ratatui
cargo run -p constraint-explorer
```

<!-- pause -->

#### Flex

```bash +exec +acquire_terminal
cd ratatui
cargo run -p flex
```

<!-- end_slide -->

### 3. ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†

<!-- pause -->

- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼š`crossterm`ã€`termion`ã€`termwiz`ã¨ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£

<!-- pause -->

#### æˆ¦ç•¥

- é›†ä¸­å‹ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
- é›†ä¸­å‹ã‚­ãƒ£ãƒƒãƒã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ‘ãƒƒã‚·ãƒ³ã‚°
- åˆ†æ•£å‹ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—/ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåŒ–ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

<!-- new_lines: 1 -->

![image:width:25%](assets/rat-ski.gif)

<!-- end_slide -->

# ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ (>=v0.30)

<!-- column_layout: [1, 1, 1] -->

<!-- column: 0 -->

### ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ

- BarChart
- Calendar
- Canvas
- Chart
- Sparkline
- Table
- `impl Widget`
- ...

<!-- column: 1 -->

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

- Crossterm
- Termion
- Termwiz
- `impl Backend`

<!-- column: 2 -->

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

ratatui  
â”œâ”€â”€ `ratatui-core`  
â”œâ”€â”€ `ratatui-widgets`  
â”œâ”€â”€ ratatui-crossterm  
â”œâ”€â”€ ratatui-termion  
â”œâ”€â”€ ratatui-termwiz  
â””â”€â”€ ratatui-macros

<!-- reset_layout -->

<!-- alignment: center -->

![image:width:12%](assets/rat-noted.gif)

<!-- pause -->

_ã—ã‹ã—ã€ã“ã“ã§çµ‚ã‚ã‚Šã§ã¯ã‚ã‚Šã¾ã›ã‚“_

<!-- end_slide -->

<!-- alignment: center -->

![](assets/suzui-rs.jpg)

`ã‚¹ã‚ºã‚­ ãƒãƒ¬ãƒ¼ãƒ`ã§Ratatui  
[](https://github.com/thatdevsherry/suzui-rs)

<!-- end_slide -->

<!-- new_lines: 1 -->

![image:width:100%](assets/ratatui-psp.png)

<!-- alignment: center -->

`PSP`ã§Ratatui  
`https://github.com/overdrivenpotato/rust-psp/pull/190`

<!-- end_slide -->

<!-- new_lines: 1 -->

åå‰ã‚’ä»˜ã‘ã‚‹ã¨ï¼š

<!-- pause -->

![image:width:70%](assets/ratatuify.png)

<!-- alignment: center -->

_https://www.urbandictionary.com/define.php?term=ratatuify_

<!-- pause -->

_ã§ã‚‚ã€ã©ã†ã‚„ã£ã¦å¯èƒ½ãªã®ï¼Ÿ_ ğŸ¤”

<!-- end_slide -->

### impl Backend

```rust
pub trait Backend {
    fn draw<'a, I>(&mut self, content: I) -> Result<()>
       where I: Iterator<Item = (u16, u16, &'a Cell)>;
    fn hide_cursor(&mut self) -> Result<()>;
    fn show_cursor(&mut self) -> Result<()>;
    fn get_cursor_position(&mut self) -> Result<Position>;
    fn set_cursor_position<P: Into<Position>>(
        &mut self,
        position: P,
    ) -> Result<()>;
    fn clear(&mut self) -> Result<()>;
    fn size(&self) -> Result<Size>;
    fn window_size(&mut self) -> Result<WindowSize>;
    fn flush(&mut self) -> Result<()>;
    // ...
}
```

<!-- end_slide -->

### ã‚«ã‚¹ã‚¿ãƒ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

| ãƒªãƒã‚¸ãƒˆãƒª | èª¬æ˜ |
| ----------------------------------- | -------------------------------------- |
| _reubeno_/`ratatui-uefi`            | UEFI                                   |
| _j-g00da_/`mousefood`               | embedded-graphicsãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰          |
| _Jesterhearts_/`ratatui-wgpu`       | GPUåŠ é€Ÿãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°                    |
| _gold-silver-copper_/`egui_ratatui` | EGUIã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ                       |
| _gold-silver-copper_/`soft_ratatui` | ç´”ç²‹ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°         |
| _cxreiff_/`bevy_ratatui_camera`     | Bevyã‚¢ãƒ—ãƒªã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°   |
| _orhun_/`ratzilla`                  | Web                                    |

![](assets/rat-point.gif)

<!-- new_lines: 1 -->

<!-- end_slide -->

#### ä¾‹ï¼šRatzilla

Rustã¨WebAssemblyã§ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ†ãƒ¼ãƒã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰

ã‚µãƒãƒ¼ãƒˆï¼š

- `CanvasBackend`
- `DomBackend`
- `WebGl2Backend`

---

<!-- pause -->

```bash +exec
handlr open https://orhun.dev/ratzilla/demo/
```

<!-- end_slide -->

ä»Šæ—¥ã¯æ¬¡ã«ã¤ã„ã¦ãŠè©±ã—ã¾ã™ï¼š

<!-- pause -->

![](assets/rat-cheese.gif)

![image:width:87%](assets/mousefood-demo.gif)

<!--alignment: center-->

_mousefood_ï¼

<!-- end_slide -->

âš ï¸ ã™ã¹ã¦ã®ãƒ„ãƒ¼ãƒ«ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

```bash
git clone https://github.com/orhun/embedded-ratatui-workshop
```

<!-- pause -->

```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

source $HOME/.cargo/env

cargo install espup
espup install

. ~/export-esp.sh

cargo install espflash ldproxy
```

<!-- end_slide -->

# ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚’çŸ¥ã‚ã†ï¼

**ESP32 T-Display**

| æ©Ÿèƒ½               | ä»•æ§˜                                 |
| --------------------- | --------------------------------------------- |
| MCU                   | ESP32 Xtensa ãƒ‡ãƒ¥ã‚¢ãƒ«ã‚³ã‚¢ LX6 ãƒã‚¤ã‚¯ãƒ­ãƒ—ãƒ­ã‚»ãƒƒã‚µ     |
| CPU                   | Xtensa ãƒ‡ãƒ¥ã‚¢ãƒ«ã‚³ã‚¢ LX6 @ æœ€å¤§ 240 MHz          |
| RAM                   | 520 KB SRAM (ESP32æ¨™æº–)               |
| ãƒ¯ã‚¤ãƒ¤ãƒ¬ã‚¹æ¥ç¶š | Wi-Fi 802.11 b/g/n, BL V4.2 + BLE             |
| ã‚·ãƒªã‚¢ãƒ«ãƒãƒƒãƒ—           | CH9102                                        |
| ã‚ªãƒ—ã‚·ãƒ§ãƒ³              | ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ï¼š4M / 16M                               |
| ã‚ªãƒ³ãƒœãƒ¼ãƒ‰æ©Ÿèƒ½     | ãƒœã‚¿ãƒ³ï¼šl006 + I007ã€ãƒãƒƒãƒ†ãƒªãƒ¼é›»åŠ›æ¤œå‡º |
| ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤               | 1.14" 135x240px IPS LCDã€ST7789V ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼   |

<!-- column_layout: [1, 1, 1]-->

<!-- column: 0 -->

<!-- new_lines:  2-->

![image:width:100%](assets/esp32.gif)

<!-- column: 1 -->

![](assets/esp32-wroom-32d.gif)

<!-- column: 2 -->

![](assets/t-display.png)

<!-- end_slide -->

# ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

<!-- column_layout: [1, 1] -->
<!-- column: 0 -->

## **esp-hal**

- ãƒ™ã‚¢ãƒ¡ã‚¿ãƒ«ï¼ˆ`#![no_std]`ï¼‰
- EspressifãŒè³‡é‡‘æä¾›

<!-- column: 1 -->

## **esp-idf-hal**

- `std`ã‚µãƒãƒ¼ãƒˆä»˜ãï¼
- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®å–ã‚Šçµ„ã¿
- ã‚«ã‚¹ã‚¿ãƒ ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³ãŒå¿…è¦

<!-- reset_layout -->

<!-- column_layout: [2, 3] -->
<!-- column: 0 -->

<!-- pause -->

## ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³

```sh
cargo install espup
espup install
```

```sh
cargo install espflash
```

<!-- column: 1 -->

<!-- pause -->

`.cargo/config.toml`:

```toml
[build]
target = "xtensa-esp32-espidf"

[target.xtensa-esp32-espidf]
linker = "ldproxy"
runner = "espflash flash --monitor"
rustflags = [ "--cfg",  "espidf_time64"]
```

<!-- end_slide -->

### Ratatui + embedded-graphics = **Mousefood**

<!-- column_layout: [4, 3] -->

<!-- column: 0 -->

- `embedded-graphics`ä¸Šã«æ§‹ç¯‰
- ã‚«ã‚¹ã‚¿ãƒ ãƒ“ãƒƒãƒˆãƒãƒƒãƒ—ãƒ•ã‚©ãƒ³ãƒˆã‚µãƒãƒ¼ãƒˆ

<!-- column: 1 -->

![image:width:40%](assets/mousefood.gif)

<!-- reset_layout -->

```rust {1-9|2|4|5|7-9|1-9}
// ã‚ã‚‰ã‚†ã‚‹embedded_graphics DrawTarget
let mut display = MyDrawTarget::new();

let backend = EmbeddedBackend::new(&mut display, EmbeddedBackendConfig::default());
let mut terminal = Terminal::new(backend)?;

loop {
    terminal.draw(...)?;
}
```

<!-- alignment: center -->

`https://github.com/j-g00da/mousefood`

<!-- end_slide -->

<!-- alignment: center -->

è©¦ã—ã¦ã¿ã¦ãã ã•ã„ï¼š

```bash
cd template
cargo run --release
```

ã¾ãŸã¯ï¼š

```bash
espflash flash --monitor apps/binaries/mousefood-demo.bin
```

![](assets/rat-ski.gif)

<!-- end_slide -->

### ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ ğŸ¤–

```rust {1-15|1-8|10|12-13|15|1-15}
let mut simulator_window = Window::new(
    "mousefood simulator",
    &OutputSettings {
        scale: 4,
        max_fps: 30,
        ..Default::default()
    },
);

let mut display = SimulatorDisplay::new(Size::new(128, 64));

let config = EmbeddedBackendConfig::default();
let backend = EmbeddedBackend::new(&mut display, config);

let mut terminal = Terminal::new(backend)?;
```

<!-- alignment: center -->

ã“ã‚Œã§ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§Ratatuiã‚’èµ·å‹•

<!-- end_slide -->

<!-- alignment: center -->

ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’å®Ÿè¡Œï¼š

```bash
cd apps/simulator
cargo run
```

ï¼ˆSDL2ãŒå¿…è¦ï¼‰

![](assets/rat-ski.gif)

<!-- end_slide -->

# ã§ã¯ã€ä½•ãŒã§ãã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ

<!-- pause -->

ã‚®ã‚¿ãƒ¼ã‚’å­¦ã¼ã†ï¼

![](assets/pcb-works.jpg)

<!-- alignment: center -->

| _Rustã€Ratatuiã€ãã—ã¦9Vãƒãƒƒãƒ†ãƒªãƒ¼ã§å‹•ä½œï¼_

<!-- end_slide -->

![image:width:30%](assets/tuitar-logo.png)

<!-- alignment: center -->

ã€Œ_ãƒãƒ¼ã‚¿ãƒ–ãƒ«ã§ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ™ãƒ¼ã‚¹ã®ã‚®ã‚¿ãƒ¼è¨“ç·´ãƒ„ãƒ¼ãƒ«_ã€

![image:width:40%](assets/tuitar-case.png)

```sh +exec
mpv /home/orhun/downloads/tuitar-final.mp4
```

<!-- end_slide -->

<!-- new_lines: 1 -->

![image:width:80%](assets/rustforge-demo.png)

<!-- alignment: center -->

[](https://www.youtube.com/live/es48dmNWMVQ)

Rust Forgeã§ã®ãƒ©ã‚¤ãƒ–ãƒ‡ãƒ¢ï¼

<!-- end_slide -->

<!-- column_layout: [5, 8] -->

<!-- column: 0 -->

### impl Widget

```rust
pub struct Fretboard {
    tuning: Vec<Note>,
    style: Style,
}
```

```rust
pub struct FretboardState {
    notes: Vec<Note>
}
```

![](assets/rat-spin.gif)

<!-- column: 1 -->

```rust
impl StatefulWidget for &Fretboard {
    type State = FretboardState;

    fn render(
        self,
        area: Rect,
        buf: &mut Buffer,
        state: &mut Self::State,
    ) {
        for s in self.tuning.iter() {
            // ...
            buf.set_line(
                area.x,
                area.y + i as u16,
                &Line::from(spans),
                area.width,
            );
        }
    }
}
```

<!-- end_slide -->

## `ratatui-fretboard`ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ç´¹ä»‹ ğŸ‰

```rust
let fretboard = Fretboard::default();
let mut state = FretboardState::default();
state.set_active_note(Note::A(4));
frame.render_stateful_widget(fretboard, area, &mut state);
```

```
E4 â•‘â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•‘
B3 â•‘â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â•‘
G3 â•‘â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•‘
D3 â•‘â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â€¢â”€â”¼â”€â”€â”€â”¼â”€â€¢â”€â”¼â”€â”€â”€â”¼â”€â€¢â”€â”¼â”€â”€â”€â”¼â”€â€¢â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•‘
A2 â•‘â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•‘
E2 â•‘â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•‘
     1   2   3   4   5   6   7   8   9  10  11  12
```

<!-- alignment: center -->

æ–‡å­—åˆ—åã€ãƒ•ãƒ¬ãƒƒãƒˆã€è‰²ãªã©ã€ã™ã¹ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ã§ã™ã€‚

<!-- end_slide -->

![width:100%](assets/mountain-dew-guitar.jpg)

<!-- end_slide -->

```
D0 â•‘â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•‘
G0 â•‘â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•‘
C0 â•‘â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•‘
F0 â•‘â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•‘
B0 â•‘â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â€¢â”€â”¼â”€â”€â”€â•‘
E1 â•‘â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â€¢â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â€¢â”€â”¼â”€â”€â”€â”¼â”€â€¢â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•‘
A1 â•‘â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â€¢â”€â”¼â”€â”€â”€â•‘
D2 â•‘â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€âœ–â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€âœ–â”€â”¼â”€â”€â”€â•‘
G2 â•‘â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€âœ–â”€â”¼â”€â¬¤â”€â”¼â”€â”€â”€â”¼â”€âœ–â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•‘
C3 â•‘â”€â”¼â”€â”€â”€â”¼â”€âœ–â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€âœ–â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â•‘
     1   2   3   4   5   6   7   8   9  10  11  12  13  14
```

![](assets/rat-clown.gif)

<!-- end_slide -->

## TUItar

```sh +exec +acquire_terminal
tuitar
```

<!-- alignment: center -->

[](https://github.com/orhun/tuitar)

<!-- end_slide -->

<!-- alignment: center -->

<!-- new_lines: 3 -->

ã‚‚ã£ã¨è¦‹ã‚‹ï¼Ÿ

![](assets/rat-demand.gif)

_å£ã§è¨€ã†ã®ã¯ç°¡å˜ã€ãƒãƒ¼ã‚ºã‚’è¦‹ã›ã¦ã€‚_

<!-- end_slide -->

![](assets/irc-client.jpg)

<!-- alignment: center -->

[](https://github.com/intuis/mnyaoo32)

<!-- end_slide -->

<!-- column_layout: [1, 4, 4, 1] -->

<!-- column: 1 -->

![image:width:90%](assets/phone-os-1.png)

<!-- column: 2 -->

![image:width:90%](assets/phone-os-2.png)

<!-- reset_layout -->

<!-- alignment: center -->

[](https://github.com/Julien-cpsn/Phone-OS)

<!-- end_slide -->

### ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

![image:width:100%](assets/s3-display.gif)

<!-- alignment: center -->

[](https://github.com/junkdog/tachyonfx)çµŒç”±

<!-- end_slide -->

<!-- new_lines: 3 -->

<!-- alignment: center -->

ã‚¢ã‚¤ãƒ‡ã‚¢ãŒæ´ã‚ãŸã¨æ€ã„ã¾ã™...

<!-- pause -->

![image:width:25%](assets/ratatui-spin.gif)

ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®æ™‚é–“ã§ã™ï¼

<!-- no_footer -->

<!-- end_slide -->

<!-- new_lines: 2 -->

![image:width:45%](assets/lethimcook.gif)

<!-- no_footer -->

<!-- end_slide -->

## ã‚­ãƒƒãƒãƒ³ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’ç¢ºèª

```bash
git clone https://github.com/orhun/embedded-ratatui-workshop
```

æ–™ç†ã‚’å§‹ã‚ã‚‹å‰ã«ãƒ„ãƒ¼ãƒ«ãŒå‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼

```bash
cd template
cargo run --release
```

<!-- alignment: center -->

âœ… ç”»é¢ã«ã€ŒRatatui on embedded devices!ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨

âš ï¸ è¡¨ç¤ºã•ã‚Œãªã„å ´åˆã¯ã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã™ã‚‹ã‹ã€ã‚·ã‚§ãƒ•ã«åŠ©ã‘ã‚’æ±‚ã‚ã¦ãã ã•ã„ã€‚

<!-- end_slide -->

```
.
â”œâ”€â”€ build.rs             -> ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ .cargo
â”‚   â””â”€â”€ config.toml      -> ESP32ç”¨ã®Cargoè¨­å®š
â”œâ”€â”€ Cargo.toml           -> ä¾å­˜é–¢ä¿‚ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ rust-toolchain.toml  -> Rustãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³ã®æŒ‡å®š
â”œâ”€â”€ sdkconfig.defaults   -> ESP-IDFè¨­å®š
â””â”€â”€ src
    â”œâ”€â”€ button.rs        -> ãƒœã‚¿ãƒ³å‡¦ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
    â”œâ”€â”€ lib.rs           -> ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®šç¾©
    â”œâ”€â”€ main.rs          -> ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
    â””â”€â”€ setup.rs         -> ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨åˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰
```

<!-- pause -->

<!-- alignment: center -->

ä¸»ã«`src/main.rs`ã§ä½œæ¥­ã—ã¾ã™ã€‚

<!-- pause -->

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç”¨ã®`App`ãƒˆãƒ¬ã‚¤ãƒˆã®å®Ÿè£…ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

<!-- end_slide -->

## ç‹¬è‡ªã®ãƒ•ãƒ¬ãƒ¼ãƒãƒ¼ã‚’è¿½åŠ 

- `App::draw()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚

- ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‚’è©¦ã—ã¦ãã ã•ã„ï¼š

  - ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤‰æ›´
  - è‰²ã‚„æ ç·šã‚’è¿½åŠ 
  - ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’è©¦ã™
  - ç•°ãªã‚‹ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

ğŸ¨ æœ€å°é™ã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆä¾‹ï¼š`https://github.com/ratatui/ratatui/tree/main/ratatui-widgets/examples`

ğŸ“š ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼š`https://docs.rs/ratatui/latest/ratatui/widgets/index.html`

---

å†ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹ã«ã¯ï¼š`cargo run --release`

<!-- end_slide -->

## ç‹¬è‡ªã®æ–™ç†ã‚’ä½œã‚ã†ï¼

åŸºæœ¬ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ãŸã®ã§ã€ä½•ã‹æ¥½ã—ã„ã‚‚ã®ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ï¼

ğŸ§  ã„ãã¤ã‹ã®ã‚¢ã‚¤ãƒ‡ã‚¢ï¼š

- ãŸã¾ã”ã£ã¡ï¼ˆãƒ©ã‚¿ã”ã£ã¡ï¼Ÿï¼‰
- ã‚¿ã‚¤ãƒãƒ¼ / ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­
- ãƒ‡ã‚¸ã‚¿ãƒ«ãŠã¿ãã˜ã‚¯ãƒƒã‚­ãƒ¼
- åå¿œã‚²ãƒ¼ãƒ ï¼ˆãƒ¢ã‚°ãƒ©å©ãã®ã‚ˆã†ãªï¼‰
- ãƒŸãƒ‹ã‚²ãƒ¼ãƒ ï¼ˆã‚¹ãƒãƒ¼ã‚¯ã‚„ãƒ†ãƒˆãƒªã‚¹ã®ã‚ˆã†ãªï¼‰
- ASCIIãƒ”ã‚¯ã‚»ãƒ«ã‚¢ãƒ¼ãƒˆï¼ˆ`Widget`ãƒˆãƒ¬ã‚¤ãƒˆã‚’èª¿ã¹ã‚‹ï¼‰

<!-- pause -->

---

ğŸ§€ ç™ºè¡¨ã¨å…±æœ‰ï¼

<!-- end_slide -->

<!-- alignment: center -->

# ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€å°ã•ãªã‚·ã‚§ãƒ•ãŸã¡ï¼ğŸ€

_ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ_

![](assets/rat-ending.gif)

è¦šãˆã¦ãŠã„ã¦ãã ã•ã„ï¼š  
_ã€Œèª°ã§ã‚‚æ–™ç†ã§ãã‚‹ â€” ãã—ã¦èª°ã§ã‚‚TUIã‚’ä½œã‚Œã¾ã™ã€‚ã€_

<!-- end_slide -->

<!-- alignment: center -->

![image:width:30%](assets/real-ratatui.jpg)

<!-- new_lines: 1 -->

ğŸ­ **ã‚¹ãƒ©ã‚¤ãƒ‰ï¼š** [](https://github.com/orhun/embedded-ratatui-talk)  
ğŸ§€ **ã‚¹ãƒãƒ³ã‚µãƒ¼ï¼š** [](https://github.com/sponsors/orhun)  
ğŸ“º **ã‚‚ã£ã¨ãƒã‚ºãƒŸã‚’è¦‹ã‚‹ï¼š** [](https://youtube.com/@orhundev)

âœ¨ æ¬¡ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ãŠä¼šã„ã—ã¾ã—ã‚‡ã† â€” ãã—ã¦æ–™ç†ã‚’ç¶šã‘ã¦ãã ã•ã„ã€‚

`P.S. ç§ã®å¸½å­ã®ä¸‹ã«ãƒã‚ºãƒŸãŒéš ã‚Œã¦ã„ã¾ã›ã‚“ã€‚`
